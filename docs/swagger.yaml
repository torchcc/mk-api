definitions:
  dto.AggregatedOrderItem:
    properties:
      create_time:
        description: 创建时间
        type: integer
      order_id:
        description: 套餐所属的order_id
        type: integer
      pkg_avatar_url:
        description: 套餐头像
        type: string
      pkg_count:
        description: 套餐数量
        type: integer
      pkg_id:
        description: 套餐id
        type: integer
      pkg_name:
        description: 套餐名称
        type: string
      pkg_price:
        description: 套餐单价
        type: number
    type: object
  dto.AggregatedOrderItemWithPkgItem:
    properties:
      create_time:
        description: 创建时间
        type: integer
      examinees:
        description: 套餐检查人信息列表
        items:
          $ref: '#/definitions/dto.ExamineeInOrderItem'
        type: array
      order_id:
        description: 套餐所属的order_id
        type: integer
      pkg_avatar_url:
        description: 套餐头像
        type: string
      pkg_count:
        description: 套餐数量
        type: integer
      pkg_id:
        description: 套餐id
        type: integer
      pkg_name:
        description: 套餐名称
        type: string
      pkg_price:
        description: 套餐单价
        type: number
      pkgItems:
        description: 套餐检查项目
        items:
          $ref: '#/definitions/dto.PkgItemName'
        type: array
    type: object
  dto.CartItem:
    properties:
      cart_id:
        description: 购物车条目id
        type: integer
      examinees:
        description: 体检人信息列表
        items:
          $ref: '#/definitions/dto.Examinee'
        type: array
      pkg_count:
        description: 套餐数量
        type: integer
      pkg_id:
        description: 套餐id
        type: integer
    required:
    - pkg_count
    - pkg_id
    type: object
  dto.CheckPayStatusOutput:
    properties:
      status:
        description: 支付状态 0-待支付 2-支付成功 4-订单已关闭
        type: integer
    type: object
  dto.CreateUserAddrInput:
    properties:
      building_detail:
        type: string
      city_id:
        type: integer
      county_id:
        type: integer
      is_default:
        type: integer
      province_id:
        type: integer
      town_id:
        type: integer
    required:
    - building_detail
    - city_id
    - county_id
    - province_id
    - town_id
    type: object
  dto.DeleteCartEntriesInput:
    properties:
      cart_ids:
        items:
          type: integer
        type: array
    type: object
  dto.Examinee:
    properties:
      examine_date:
        description: 体检日期 时间戳， 精确到 日
        type: integer
      examinee_mobile:
        description: 体检人电话
        type: string
      examinee_name:
        description: 体检人姓名
        type: string
      gender:
        description: 性别 1-男 2-女
        type: integer
      id_card_no:
        description: 身份证号码
        type: string
      is_married:
        description: 婚否 1-是 2-否
        type: integer
    required:
    - examine_date
    - examinee_mobile
    - examinee_name
    - gender
    - id_card_no
    type: object
  dto.ExamineeInOrderItem:
    properties:
      examine_date:
        description: 体检日期 时间戳， 精确到 日
        type: integer
      examinee_mobile:
        description: 体检人电话
        type: string
      examinee_name:
        description: 体检人姓名
        type: string
      gender:
        description: 性别 1-男 2-女
        type: integer
      id_card_no:
        description: 身份证号码
        type: string
      is_married:
        description: 婚否 1-是 2-否
        type: integer
      order_item_id:
        description: order item(订单项)的id
        type: integer
    required:
    - examine_date
    - examinee_mobile
    - examinee_name
    - gender
    - id_card_no
    type: object
  dto.GetCaptchaOutput:
    properties:
      captcha_img_url:
        type: string
    type: object
  dto.GetCartOutputElem:
    properties:
      avatar_url:
        description: 套餐头像url
        type: string
      hospital_id:
        description: 医院id
        type: integer
      hospital_name:
        description: 医院名字
        type: string
      id:
        description: 购物车条目id
        type: integer
      name:
        description: 套餐名字
        type: string
      pkg_count:
        description: 套餐数量
        type: integer
      pkg_id:
        description: 套餐id
        type: integer
      pkg_price:
        description: 套餐单价
        type: number
      update_time:
        description: 更新时间
        type: integer
    type: object
  dto.GetPackageOutPut:
    properties:
      basic_info:
        $ref: '#/definitions/dto.PackageBasicInfo'
        description: 套餐基本信息
        type: object
      items:
        description: 具体项目
        items:
          $ref: '#/definitions/dto.PackageItem'
        type: array
      notices:
        description: 套餐须知
        items:
          $ref: '#/definitions/dto.PackageNotice'
        type: array
      procedure:
        description: 套餐流程
        items:
          $ref: '#/definitions/dto.PackageProcedure'
        type: array
    type: object
  dto.GetUserAddrOutput:
    properties:
      building_detail:
        type: string
      city_id:
        type: integer
      county_id:
        type: integer
      id:
        type: integer
      is_default:
        type: integer
      province_id:
        type: integer
      town_id:
        type: integer
    required:
    - building_detail
    - city_id
    - county_id
    - province_id
    - town_id
    type: object
  dto.JsApiTicketOutPut:
    properties:
      signature:
        description: 微信JsSDK签名
        type: string
    type: object
  dto.ListOrderOutputEle:
    properties:
      aggregated_order_items:
        description: 订单中的套餐列表
        items:
          $ref: '#/definitions/dto.AggregatedOrderItem'
        type: array
      amount:
        description: 订单总价
        type: number
      order_id:
        description: 订单id
        type: integer
      out_trade_no:
        description: 订单号
        type: integer
      status:
        description: 订单状态 0-待付款，2-待预约(指已经付款) 3-已退款 4-已关闭 5-待评价
        type: integer
    type: object
  dto.ListPackageOutputEle:
    properties:
      avatar_url:
        description: 套餐头像
        type: string
      category_id:
        description: 套餐类别
        type: integer
      category_name:
        description: 类别名称
        type: string
      hospital_id:
        type: integer
      hospital_name:
        description: 医院体检中心名字
        type: string
      id:
        description: 套餐id
        type: integer
      level:
        description: 医院等级， 0-不限 1-公立三甲 2-公立医院 3-民营医院 4-专业机构
        type: integer
      name:
        description: 套餐名字
        type: string
      sold:
        description: 已经预约的单数, 这个暂时需要前端用hidden隐藏起来
        type: integer
    type: object
  dto.LoginRegisterInput:
    properties:
      captcha_code:
        description: 图形验证码
        type: string
      latitude:
        description: 注册时的纬度， 获取不到请传 0.0
        type: number
      longitude:
        description: 注册时的经度, 获取不到的话请传 0.0
        type: number
      mobile:
        description: 用户手机号码
        type: string
      sms_code:
        description: 短信验证码
        type: string
    required:
    - captcha_code
    - mobile
    - sms_code
    type: object
  dto.PackageAttribute:
    properties:
      attr_type:
        description: 套餐的属性类型， 1-套餐项目 2-套餐须知 3-套餐体检的流程
        type: integer
      brief:
        description: 属性概述
        type: string
      comment:
        description: 属性详情
        type: string
      create_time:
        description: 创建时间
        type: integer
      id:
        type: integer
      name:
        description: 属性名字
        type: string
      order_no:
        description: 属性排序， 小的排前面
        type: integer
      pkg_id:
        type: integer
    type: object
  dto.PackageBasicInfo:
    properties:
      avatar_url:
        description: 套餐URL
        type: string
      brief:
        description: 套餐简介
        type: string
      comment:
        description: 套餐详细介绍
        type: string
      hospital_id:
        type: integer
      hospital_name:
        description: 医院体检中心名称
        type: string
      id:
        type: integer
      name:
        description: 套餐名称
        type: string
      price_original:
        description: 原价/门市价
        type: number
      price_real:
        description: 实际价格
        type: number
      target:
        description: 套餐目标人群 0-不限 1-男 2-未婚女 3-已婚女
        type: integer
      tips:
        description: 套餐提示
        type: string
    type: object
  dto.PackageItem:
    $ref: '#/definitions/dto.PackageAttribute'
  dto.PackageNotice:
    $ref: '#/definitions/dto.PackageAttribute'
  dto.PackageProcedure:
    $ref: '#/definitions/dto.PackageAttribute'
  dto.PaginateListOutput:
    properties:
      has_next:
        description: 是否有下一页, 1 是， 0 否
        type: integer
      list:
        description: 列表数据
        type: object
      page_no:
        description: 页码
        type: integer
      page_size:
        description: 本页实际条目数量
        type: integer
    type: object
  dto.PkgItemName:
    properties:
      name:
        description: 属性名字，此处是套餐项目名字
        type: string
      order_no:
        description: 属性排序， 小的排前面
        type: integer
    type: object
  dto.PostCartInput:
    properties:
      pkg_id:
        description: 要添加的套餐id
        type: integer
    type: object
  dto.PostOrderInput:
    properties:
      cart_items:
        description: 订单项目
        items:
          $ref: '#/definitions/dto.CartItem'
        type: array
      subscriber_comment:
        type: string
      subscriber_mobile:
        description: 预约人手机号
        type: string
    required:
    - cart_items
    - subscriber_mobile
    type: object
  dto.PostOrderOutput:
    properties:
      nonceStr:
        type: string
      package:
        type: string
      paySign:
        type: string
      prePayId:
        type: string
      signType:
        type: string
      timestamp:
        type: string
    type: object
  dto.ResourceID:
    properties:
      id:
        type: integer
    type: object
  dto.RetrieveOrderOutput:
    properties:
      aggregated_order_items_with_pkg_item:
        description: 聚合后包括套餐项目的的order item
        items:
          $ref: '#/definitions/dto.AggregatedOrderItemWithPkgItem'
        type: array
      amount:
        description: 订单总价
        type: number
      mobile:
        description: 下单人/预约人手机号
        type: string
      order_id:
        description: 订单id
        type: integer
      out_trade_no:
        description: 订单号
        type: integer
      remark:
        description: 订单备注
        type: string
      status:
        description: 订单状态 0-待付款，2-待预约(指已经付款) 3-已退款 4-已关闭 5-待评价
        type: integer
    type: object
  dto.UpdateUserAddrInput:
    $ref: '#/definitions/dto.CreateUserAddrInput'
  dto.UserDetailOutput:
    properties:
      avatar_url:
        type: string
      gender:
        type: integer
      id:
        type: integer
      mobile:
        type: string
      open_id:
        type: string
      user_name:
        type: string
    type: object
  middleware.Response:
    properties:
      data:
        type: object
      ecode:
        type: integer
      emsg:
        type: string
    type: object
  model.UserAddr:
    properties:
      building_detail:
        type: string
      city_id:
        type: integer
      city_name:
        type: string
      county_id:
        type: integer
      county_name:
        type: string
      id:
        type: integer
      is_default:
        type: integer
      province_id:
        type: integer
      province_name:
        type: string
      town_id:
        type: integer
      town_name:
        type: string
      user_id:
        type: integer
    required:
    - building_detail
    - city_id
    - county_id
    - province_id
    - town_id
    type: object
info:
  contact: {}
  license: {}
paths:
  /cart/:
    delete:
      consumes:
      - application/json
      description: 删除购物车条目
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 加购的套餐id
        in: body
        name: cart_ids
        required: true
        schema:
          $ref: '#/definitions/dto.DeleteCartEntriesInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  type: string
              type: object
      summary: 删除购物车条目
      tags:
      - cart
    get:
      consumes:
      - application/json
      description: 获取购物车里面的pkg列表
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.GetCartOutputElem'
                  type: array
              type: object
      summary: 获取购物车里面的pkg列表
      tags:
      - cart
    post:
      consumes:
      - application/json
      description: 加购物车
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 加购的套餐id
        in: body
        name: pkgId
        required: true
        schema:
          $ref: '#/definitions/dto.PostCartInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  type: string
              type: object
      summary: 往购物车增添一个套餐
      tags:
      - cart
  /login_register/:
    post:
      consumes:
      - application/json
      description: 登录或者注册
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: captcha_code:图形验证码， sms_code:短信验证码
        in: body
        name: loginBody
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRegisterInput'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  type: string
              type: object
      summary: 登录或者注册
      tags:
      - login
  /login_register/captcha:
    get:
      consumes:
      - application/json
      description: 获取图片验证码
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.GetCaptchaOutput'
              type: object
      summary: 获取图片验证码
      tags:
      - login
  /login_register/sms:
    get:
      consumes:
      - application/json
      description: 获取短信验证码
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 用户手机号码
        in: query
        name: mobile
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/middleware.Response'
      summary: 获取短信验证码
      tags:
      - login
  /orders/:
    get:
      consumes:
      - application/json
      description: 获取订单列表
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 每页多少条
        in: query
        name: page_size
        type: integer
      - description: 页码
        in: query
        name: page_no
        type: integer
      - description: 订单状态 -1 全部(默认值) 0-未付款，2-已付款(待预约), 3-已退款, 4-已关闭
        in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/dto.PaginateListOutput'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.ListOrderOutputEle'
                        type: array
                    type: object
              type: object
      summary: 获取订单列表
      tags:
      - orders
    post:
      consumes:
      - application/json
      description: 创建订单,返回前端调起微信支付的必须参数
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 创建订单的请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.PostOrderInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.PostOrderOutput'
              type: object
      summary: 创建订单
      tags:
      - orders
  /orders/{id}:
    delete:
      consumes:
      - application/json
      description: 删除订单
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 订单的id, order_id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  type: string
              type: object
      summary: 删除订单
      tags:
      - orders
    get:
      consumes:
      - application/json
      description: 获取订单详情
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 订单的id, order_id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.RetrieveOrderOutput'
              type: object
      summary: 获取订单详情
      tags:
      - orders
  /pay/status:
    get:
      consumes:
      - application/json
      description: 前端轮询支付状态
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 订单的prepay_id
        in: query
        name: prepay_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.CheckPayStatusOutput'
              type: object
      summary: 查询订单支付状态
      tags:
      - pay
  /pkg/:
    get:
      consumes:
      - application/json
      description: 获取套餐列表
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 每页多少条
        in: query
        name: page_size
        type: integer
      - description: 页码
        in: query
        name: page_no
        type: integer
      - description: 医院等级， 0-不限 1-公立三甲 2-公立医院 3-民营医院 4-专业机构
        in: query
        name: level
        type: string
      - description: 套餐类别id
        in: query
        name: category_id
        type: integer
      - description: 价格区间左值, 0表示最小
        in: query
        name: min_price
        type: integer
      - description: 价格区间左值, 0表示无上限
        in: query
        name: max_price
        type: integer
      - description: 适用人群 0-不限 1-男士 2-女未婚 3-女已婚
        in: query
        name: target
        type: integer
      - description: 高发疾病 0-不限 1-食物不耐受检测，2-骨关节疾病体检 3-健康防癌体检 4-幽门螺旋杆菌检测 5-甲状腺检测 6-糖尿病检测
        in: query
        name: disease
        type: integer
      - description: 优先排序 0-默认排序，1-低价优先 2 高价优先
        in: query
        name: order_by
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/dto.PaginateListOutput'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.ListPackageOutputEle'
                        type: array
                    type: object
              type: object
      summary: 获取套餐列表
      tags:
      - packages
  /pkg/{id}:
    get:
      consumes:
      - application/json
      description: 获取单个套餐详情
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: package id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.GetPackageOutPut'
              type: object
      summary: 获取单个套餐详情
      tags:
      - packages
  /users/addrs:
    get:
      description: 获取收件地址列表
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.UserAddr'
                  type: array
              type: object
      summary: 个人中心->账户信息->收件地址
      tags:
      - addrs
    post:
      consumes:
      - application/json
      description: 新增地址
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: 新增用户收件地址
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.CreateUserAddrInput'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ResourceID'
              type: object
      summary: 新增用户收件地址
      tags:
      - addrs
  /users/addrs/{id}:
    delete:
      consumes:
      - application/json
      description: 删除单个收件地址的
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: addr id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ResourceID'
              type: object
      summary: 删除单个收件地址的
      tags:
      - addrs
    get:
      consumes:
      - application/json
      description: 获取单个收件地址的详情
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: addr id
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.GetUserAddrOutput'
              type: object
      summary: 获取单个收件地址的详情
      tags:
      - addrs
    put:
      consumes:
      - application/json
      description: 修改单个收件地址的
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      - description: addr id
        in: path
        name: id
        required: true
        type: integer
      - description: 修改用户收件地址
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateUserAddrInput'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ResourceID'
              type: object
      summary: 修改单个收件地址的
      tags:
      - addrs
  /users/profile:
    get:
      consumes:
      - application/json
      description: 获取用户的profile
      parameters:
      - description: 用户token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/middleware.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDetailOutput'
              type: object
      summary: 个人中心->账户信息
      tags:
      - users
  /wx/js_ticket:
    get:
      consumes:
      - application/json
      description: 获取jsApiTicket 签名
      parameters:
      - description: 传入需要的调用js-sdk的uri地址
        in: query
        name: uri
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.JsApiTicketOutPut'
      summary: 获取签名
      tags:
      - WechatTag
  /wx/launch_auth:
    get:
      description: 发起授权，直接在一个button中发一个get请求到这里即可
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.JsApiTicketOutPut'
      summary: 发起授权
      tags:
      - WechatTag
swagger: "2.0"
